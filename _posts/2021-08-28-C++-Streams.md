---
title: C++ Streams
author: Richard Hernandez
date: 2019-08-08 14:10:00 +0800
categories: [C++, C++ Streams]
tags: [C++, Advance, Proggramming, streams]
---

## Intro: [Link](https://www.youtube.com/watch?v=hk5NYscSPHI&list=PL5jc9xFGsL8G3y3ywuFSvOuNm3GjBwdkb&index=18&ab_channel=BoQian)

What us stream?: Serial IO Interferface to external devices (file, stdin/stdout, network, etc.)


```cpp
string s("Hello");
s[3] = 't'; // Random access
//cout[3] = 't'; // Error

{
ofstream of("MyLog.txt"); // Creates a new file for write, if the file didn't exist
of << "Text" << endl;
of << 234 <<endl;
of << 2.3 <<endl; 

of << bitset<8>(14) << endl; // 00001110
of << complex<int>(2,3) << endl; // (2,3)

} //RAII

```

IO Operations:

formatting the data  <-------->  communicatiing the data with external devices

Software Engineer Principle: Low Couping -> Resuability


## File Stream and Error Handling: [Link](https://www.youtube.com/watch?v=bzlDPBKn2Fs&list=PL5jc9xFGsL8G3y3ywuFSvOuNm3GjBwdkb&index=18&ab_channel=BoQian)

File Stream:

Ouput: 

```cpp
{
    ofstream of("Log.txt");// Open file for write , and clear the file
    cout<< "Text to the file"<< endl;
}

{
    ofstream of("Log.txt", ofstream::app); // Move the output pointer to te end of the file
    cout<< "Text to the file"<< endl;
}
{
    ofstream of("Log.txt", ofstream::in | ofstream::out);
    of.seekp(10, ios::beg); // Move the output pointer 10 chars after begin
    of << "12345"; // Overwrite 5 char
    of.seekp(-5, ios::end); //Move the output  pointer 5 chars before end
    of << "More text, more text" << endl;
    of.seekp(-5, ios::cur); // Move the ouput pointer 5 char before the current position
}
```

Input: 

```cpp
{
    ifstream inf("Log.txt");
    int i;
    inf >> i; // read one word
    // Error status: goodbit, badbit, failbit, eofbit
    inf.good(); // Everything is OK (goodbit = 1)
    inf.bad(); //Non-recoverable error (badbit = 1)
    inf.fail(); //Failed Stream operation (failbit == 1 badbit == 1)
    inf.eof(); // End of file (eofbit == 1)

    inf.clear(); // Clear all error status
    inf.clear(ios::badbit); // sets a new value to the error flag

    inf.rdstate(); // Read the current status flag
    inf.clear(inf.rdstate() & ~ios::failbit); // Clear only the failbit

    if(inf) // Equivalent to: if (!inf.fail())
        cout << "Read successfully"
    
    if(inf >> i)
        cout << "Read successfully";

    // Handle the errors with exceptions
    inf.exceptions(ios::badbit | ios::failbit); // setting the exception mask
    // When badbit or failbit set 1, exception of iosLLfailure will be thrown
    // When eofbit set to 1, no exception 
    inf.exceptions(ios::goodbit); // No exception

}

```



